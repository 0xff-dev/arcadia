# create
mutation createDatasource($input: CreateDatasourceInput!) {
  Datasource {
    createDatasource(input: $input) {
      name
      namespace
      displayName
      endpoint {
        url
        authSecret {
          kind
          Name
        }
        insecure
      }
      oss {
        bucket
      }
    }
  }
}

# update
mutation updateDatasource($input: UpdateDatasourceInput) {
  Datasource {
    updateDatasource(input: $input) {
      name
      namespace
      displayName
      endpoint {
        url
        authSecret {
          kind
          Name
        }
        insecure
      }
      oss {
        bucket
      }
    }
  }
}

# delete
mutation deleteDatasource($input: DeleteDatasourceInput!) {
  Datasource {
    deleteDatasource(input: $input)
  }
}

# list datasources
query listDatasources($input: ListDatasourceInput!) {
  Datasource {
    listDatasources(input: $input) {
    totalCount
    hasNextPage
    nodes {
      __typename
      ... on Datasource {
        name
        namespace
        displayName
        endpoint {
          url
          authSecret {
            kind
            Name
          }
          insecure
        }
        oss {
          bucket
        }
      }
      }
    }
  }
}

# get datasource
query getDatasource($name: String!, $namespace: String!) {
  Datasource {
    getDatasource(name: $name, namespace: $namespace) {
      name
      namespace
      displayName
      endpoint {
        url
        authSecret {
          kind
          Name
        }
        insecure
      }
      oss {
        bucket
      }
    }
  }
}
